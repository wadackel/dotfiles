# ~/.tmux.popup.conf
# ポップアップ内サーバー専用設定

# ポップアップ内サーバー用フラグ
set -g @popup 1

# 既存設定を読み込み
source-file ~/.config/tmux/tmux.conf

# C-q は prefixなしで detach（ネスト防止）
unbind-key C-q
unbind-key -n C-q
bind-key -n C-q detach-client

# C-p: popupを閉じて前のwindowへ移動
# C-n: popupを閉じて次のwindowへ移動
# NOTE:
#   - TMUX=でpopupのソケット指定をクリアし、メインセッションを操作
#   - if-shellで成功時のみdetachする（失敗時はpopupを維持）
bind-key C-p if-shell 'TMUX= tmux previous-window' 'detach-client'
bind-key C-n if-shell 'TMUX= tmux next-window' 'detach-client'

# 念のため再設定（他設定で上書きされた場合に備える）
set -g @popup 1

# === ポップアップ専用スタイル ===

# ステータスバーを非表示
set-option -g status off
